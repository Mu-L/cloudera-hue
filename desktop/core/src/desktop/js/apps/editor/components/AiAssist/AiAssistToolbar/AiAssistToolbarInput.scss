@use 'variables' as vars;
@use '../sharedAiAssistVars' as ai-assist-vars;

$line-height: 20px;
$semi-transparent-background: rgba(237, 247, 255, 0.5);
$input-animation-time: 0.5s;
$input-padding: 4px;

.cuix.antd {
  .hue-ai-assist-toolbar-input__wrapper {
    flex-grow: 0;
    width: 0px;
    animation: contractInput $input-animation-time ease forwards;   
  }

  .hue-ai-assist-toolbar-input__wrapper--expanded {
    animation: expandInput $input-animation-time ease forwards;
    flex-grow: 1;
  }

  .hue-ai-assist-toolbar-input__text-input {
    all: unset;
    caret-color: vars.$fluidx-blue-400;
    color: vars.$fluidx-blue-400;
    font-size: 14px;
    overflow: hidden;
    margin-top: 30px; // TODO: use variable
    line-height: $line-height;
    white-space: pre-line;

    position: absolute;
    top: -20px; // TODO: use variable
    padding-left: $input-padding;
    padding-bottom: $input-padding;
    padding-right: $input-padding;
    height: inherit;

    &::placeholder {
      color: vars.$fluidx-blue-200;
    }
    &:focus {
      text-overflow: inherit;
    }
  }

  .hue-ai-assist-toolbar-input__text-input--empty {
    width: 100%;
    border-left: 2px solid transparent;
  }
  .hue-ai-assist-toolbar-input__text-input--animating {
    visibility: hidden;
  }  

  .hue-ai-assist-toolbar-input__text-input--multi-line,
  .hue-ai-assist-toolbar-input__text-input--is-prefill {
    z-index: 2; // Needed to make sure the input is on top of the editor
    backdrop-filter: blur(5px);
    background-color: $semi-transparent-background;
  }

  .hue-ai-assist-toolbar-input__text-input--multi-line {
    border-left: 2px solid;
    border-right: 2px solid;
  }

  // Used as a reference element for measuring the width of the input
  // which is needed to create a growing input field.
  .hue-ai-assist-toolbar-input__size-reference-element {
    visibility: hidden;
    white-space: pre-wrap;
    overflow-wrap: break-all;
    color: red;
    line-height: $line-height;
    word-wrap: break-word;
    display: inline-block;
    padding-left: $input-padding;
    padding-right: $input-padding;
  }

  .hue-ai-assist-toolbar-input__single-line-reference-element {
    visibility: hidden;
    position: absolute;
    line-height: $line-height;
  }
}


@keyframes expandInput {
  from {
    flex-grow: 0;
  }
  to {
    flex-grow: 1;
  }
}

@keyframes contractInput {
  from {
    flex-grow: 1;
  }
  to {
    flex-grow: 0;
  }
}